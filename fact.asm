.CODE
.FALIGN
fact
STR R7 R6 #-2
STR R5 R6 #-3
ADD R6 R6 #-3
ADD R5 R6 #0
LDR R0 R6 #3
STR R0 R6 #-1
ADD R6 R6 #-1
LDR R0 R6 #0
STR R0 R6 #-1
ADD R6 R6 #-1
CONST R0 #1
HICONST R0 #0
STR R0 R6 #-1
ADD R6 R6 #-1
LDR R0 R6 #0
LDR R1 R6 #1
CMP R0 R1
BRn FALSE_0
CONST R0 #1
JMP END_CMP_0
FALSE_0
CONST R0 #0
END_CMP_0
STR R0 R6 #1
ADD R6 R6 #1
LDR R0 R6 #0
ADD R6 R6 #1
CMPI R0 #0
BRz fact_ELSE_0
fact_IF_0
CONST R0 #1
HICONST R0 #0
STR R0 R6 #-1
ADD R6 R6 #-1
JMP fact_ENDIF_0
fact_ELSE_0
LDR R0 R6 #0
STR R0 R6 #-1
ADD R6 R6 #-1
CONST R0 #1
HICONST R0 #0
STR R0 R6 #-1
ADD R6 R6 #-1
LDR R0 R6 #0
LDR R1 R6 #1
STR R0 R6 #1
STR R1 R6 #0
LDR R0 R6 #0
LDR R1 R6 #1
SUB R0 R0 R1
STR R0 R6 #1
ADD R6 R6 #1
JSR fact
LDR R0 R6 #0
LDR R1 R6 #1
STR R0 R6 #1
STR R1 R6 #0
ADD R6 R6 #1
LDR R0 R6 #0
LDR R1 R6 #1
MUL R0 R0 R1
STR R0 R6 #1
ADD R6 R6 #1
fact_ENDIF_0
LDR R7 R5 #-1
ADD R6 R5 #0
ADD R6 R6 #3
STR R7 R6 #-1
LDR R5 R6 #-3
LDR R7 R6 #-2
ADD R6 R6 #-1
RET
.CODE
.FALIGN
main
STR R7 R6 #-2
STR R5 R6 #-3
ADD R6 R6 #-3
ADD R5 R6 #0
CONST R0 #4
HICONST R0 #0
STR R0 R6 #-1
ADD R6 R6 #-1
JSR fact
JSR printnum
JSR endl
CONST R0 #5
HICONST R0 #0
STR R0 R6 #-1
ADD R6 R6 #-1
JSR fact
JSR printnum
JSR endl
CONST R0 #6
HICONST R0 #0
STR R0 R6 #-1
ADD R6 R6 #-1
JSR fact
JSR printnum
JSR endl
CONST R0 #7
HICONST R0 #0
STR R0 R6 #-1
ADD R6 R6 #-1
JSR fact
JSR printnum
JSR endl
LDR R7 R5 #-1
ADD R6 R5 #0
ADD R6 R6 #3
STR R7 R6 #-1
LDR R5 R6 #-3
LDR R7 R6 #-2
ADD R6 R6 #-1
RET
